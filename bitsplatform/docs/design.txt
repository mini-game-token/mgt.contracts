一、数据设计
   1.用户表
     eos账号 昵称 性别=1 头像=0 积分=0 充值量=0 提现量=0 游戏号=0 桌号=0 状态(正常=0，积分游戏锁定=1，人工锁定=2,作弊=3,其他...) 最后活跃时间

   2.游戏表
     名称 说明 状态=0(正常=0，关闭=1) 总收入=0 总局数=0 当前局(桌)数=0 总参与人次=0 大类 小类 扩展数据json 最小入场金额(point) 固定收费=0 比例收费=0 是否是积分游戏=true
     说明：1.先收费，固定收费,所有玩家都收
          2.后收费，比例收费，只收取赢家
          3.如果“固定收费“与”比例收费“同时设置将同时收取
          4."比例收费"最大100最小0
          5.如果是积分游戏”总收入“为积分，否则为对应币种

   3.全局状态表
     积分比例=100 是否暂停提现=false 是否暂停充值=false 游戏总量=0 用户总量=0 最高用户量=0 提现手续费=0 充值送分=0 
     积分总量=0 充值总量(EOS)=0 提现总量(EOS)=0 提现手续费总量=0 充值送分总量=0 平台收入
     说明：积分总量=(充值总量-提现总量)*积分比例+充值送分总量

   4.游戏结算数据
     struct settlement {
       account_name user;     //结算账户
       bool winner = false;   //是否是赢家
       asset quantity;        //结算金额,如果是积分游戏symbol=POINT，否则为SYS（EOS）
     };

二、接口设计
   1.充值接口(同时实现注册)
   2.提现接口
   3.结算接口(积分,sys)
   4.全局参数配置接口
   5.用户信息修改接口
   6.游戏信息添加/修改/删除接口
   7.手动锁定用户接口*
   8.token功能
   9.领取平台收
   10.领取团队token份额
   11.获取token奖励
   12.绑定引荐人
   13.分红
   14.清理分红记录
   15.为引荐池和消费奖励池充值并开启功能

三、权限设计
   1.平台要求游戏自定义权限(game)
   2.游戏要求用户自定义权限(game)
   3.提现要求平台active权限(首先要求用户active权限，通过验证后合约inline)

四、游戏与平台交互设计
   1.当游戏创建桌子时，游戏通知平台，用户进入游戏（需要游戏的game权限）,此时用户进入“游戏锁定”状态；
   2.当游戏结束时，游戏通知平台扣积分(需要游戏的game权限)，由平台解除用户的“游戏锁定”状态；
   3.游戏合约账号与游戏名称保持一致。

五、引荐人设计
   1.引荐逻辑设定
   （1）用户可以随时创建引荐关系；
   （2）引荐数据由引荐人承担内存；
   （3）引荐人只有当被引荐人产生消费（充值不算消费）时才能获得收益；
   （4）用户在充值或者下注时可自动创建引荐关系；
   （5）这期引荐计划只针对token; 

   2.表设计
   (1)用户表添加"引荐人"、“是否完成首充”字段;
   (2)引荐人表：账号、当前等级、引荐人数、称号、成为引荐人时间;
   (3)引荐全局配置表：等级称号（数组）、等级标准（数组）、等级赠送额（token数组）、是否开启引荐功能、
      引荐token池、引荐token池总量；
   (4)引荐关系冗余表：id、引荐人、被引荐人、引荐时间、是否完成首充。

六、消费送token
   1.消费逻辑设定
   （1）用户在游戏中被抽成；
   （2）用户玩游戏的门票；
   （3）送token计算方式：如果消费的是eos,则token=eos*X;如果消费的是金币，则token=金币*比例*X；
   （4）X = Floor((消费池剩余token/消费池token总量+0.1)*500)；
   （5）token是实时发行/转账到用户。

   2.表设计
   （1）消费全局配置表：开始时间、消费token池总量、消费token池;

   3.token memo设计
   （1）首充奖励：mg:Reward:firstRecharge
   （2）消费奖励：mg:Reward:consume
   （3）引荐首充奖励：mg:RefReward:firstRecharge
   （4）引荐消费奖励：mg:RefReward:consume

   4.sys token memo设计
   （1）下注：mg:(hash)
   （2）下注带引荐：mg:(hash):refname
   （3）充值：mg:deposit
   （4）提现：mg:withdraw
   （5）游戏中获胜：mg:winner
   （6）领取平台收入：mg:claimincome
   （7）代充值：mg:depositto[:user]   如果不带user参数，将和普通充值一样，如果带了user，则form为引荐人，user为金币获得人  

七、分红计划
   1.分红全局配置表：
      启动分红的已分发token占比、平台收益进入分红池比例、金币池最小分红数量、分红最小间隔时间（小时）、金币池、上次分红时间、
      是否分红中、一次分红最大计算量（EOS的cpu限制）、上次最后分红人的name

    
   